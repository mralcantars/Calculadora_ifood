<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Calculadora iFood</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <a href="{{ url_for('index') }}">Início</a>
        <a href="{{ url_for('explicacao') }}">Explicação</a>
        <a href="{{ url_for('lucros') }}">Lucros</a>
    </nav>

    <div class="container">
        <h1>Calculadora de Precificação do iFood</h1>
        <form method="POST">
            <label>Preço da loja:</label>
            <div class="input-group">
                <input placeholder="R$" type="number" step="0.01" name="preco_loja" required>
            </div>

            <label>Taxa de entrega média:</label>
            <div class="input-group">
                <input placeholder="R$" type="number" step="0.01" name="entrega" required>
            </div>

            <label>Campanha inteligente (por pedido):</label>
            <div class="input-group">
                <input placeholder="R$" type="number" step="0.01" name="campanha" required>
            </div>

            <label>Cupom de desconto médio:</label>
            <div class="input-group">
                <input placeholder="R$" type="number" step="0.01" name="cupom" required>
            </div>

            <label>Comissão iFood:</label>
            <select name="comissao" required>
                <option value="0.17">Entrega Própria (17%)</option>
                <option value="0.28">Entrega Parceira (28%)</option>
            </select>

            <button type="submit">Calcular</button>
        </form>

        {% if resultado %}
        <div class="resultado">
            <h2>Preço sugerido no iFood:</h2>
            <p>R$ {{ resultado }}</p>
        </div>
        {% endif %}

        {% if historico %}
        <div class="historico">
            <h2>Histórico de Cálculos</h2>
            {% for item in historico %}
            <div class="card">
                <p><strong>Preço da loja:</strong> R$ {{ item.preco_loja }}</p>
                <p><strong>Taxa de entrega:</strong> R$ {{ item.entrega }}</p>
                <p><strong>Campanha inteligente:</strong> R$ {{ item.campanha }}</p>
                <p><strong>Cupom:</strong> R$ {{ item.cupom }}</p>
                <p><strong>Comissão:</strong> {{ (item.comissao * 100) | round(2) }}%</p>
                <p class="resultado-final"><strong>Preço sugerido:</strong> R$ {{ item.resultado }}</p>
                <p><strong>Preço por kg:</strong> R$ {{ item.preco_por_kg }}</p>
                <p><strong>Preço por 100g:</strong> R$ {{ item.preco_100g }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</body>
</html>
